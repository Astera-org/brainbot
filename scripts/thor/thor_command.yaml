# Brainbot command service configuration for XLerobot on Jetson Thor
teleop_manager_defaults: &teleop_manager_defaults
  host: 192.168.22.171
  port: 7100
  start_timeout_s: 10.0
  stop_timeout_s: 5.0

teleops:
  leader:
    mode: remote
    host: 192.168.22.171
    port: 7001
    timeout_ms: 1000
    config: ../pc/teleop_server.yaml
    manager:
      <<: *teleop_manager_defaults
      service: teleop_leader
  joycon:
    mode: remote
    host: 192.168.22.171
    port: 7002
    timeout_ms: 1000
    config: ../pc/joycon.yaml
    manager:
      <<: *teleop_manager_defaults
      service: teleop_joycon
  # gamepad: # TODO
  #   mode: remote
  #   host: 192.168.22.171
  #   port: 7003
  #   timeout_ms: 1000
  #   config: ../pc/gamepad.yaml
  #   manager:
  #     <<: *teleop_manager_defaults
  #     service: teleop_gamepad
  ar:
    mode: remote
    host: 127.0.0.1
    port: 7004
    timeout_ms: 1000
    config: ../pc/ar_teleop.yaml
    manager:
      <<: *teleop_manager_defaults
      service: teleop_ar
      host: 127.0.0.1
  # localteleop: # Example local teleop if running on-device
  #   mode: local
  #   config:
  #     type: xlerobot_leader_gamepad
  #     id: local

ai:
  host: 172.17.0.2        # GR00T running in container on Thor
  port: 5555
  timeout_ms: 5000
  startup_timeout_ms: 1000
  instruction_key: language_instruction
  modality_config_path: scripts/thor/xlerobot_modality.json
  camera_keys: [left, right, top]
  state_keys:
    - left_shoulder_pan.pos
    - left_shoulder_lift.pos
    - left_elbow_flex.pos
    - left_wrist_flex.pos
    - left_wrist_roll.pos
    - left_gripper.pos
    - right_shoulder_pan.pos
    - right_shoulder_lift.pos
    - right_elbow_flex.pos
    - right_wrist_flex.pos
    - right_wrist_roll.pos
    - right_gripper.pos
    - x.vel
    - y.vel
    - theta.vel
    - mount_pan.pos
    - mount_tilt.pos
  action_horizon: 50

network:
  host: 127.0.0.1
  port: 6000
webviz:
  host: 0.0.0.0
  port: 8080
camera_stream:
  host: 127.0.0.1
  port: 7005
  quality: 70
  sources:
    - name: left
      path: robot.cameras.left
      fps: 15
    - name: right
      path: robot.cameras.right
      fps: 15
    - name: top
      path: robot.cameras.top
      fps: 15
data:
  config_path: thor_data.yaml
default_mode: idle
metadata:
  node: xlerobot
